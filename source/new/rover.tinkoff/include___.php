<? $GLOBALS['____1821209743']= array(base64_decode('ZGV'.'m'.'aW'.'5l'),base64_decode('c3RycmV2'),base64_decode('c3R'.'yd'.'G91c'.'HB'.'lcg'.'=='),base64_decode('c3ByaW'.'5'.'0Zg=='),base64_decode('c'.'3ByaW50Zg=='),base64_decode('c3Vic3'.'Ry'),base64_decode('c'.'3'.'Rycm'.'V2'),base64_decode('Ym'.'FzZTY0X2RlY29'.'kZQ=='),base64_decode(''.'c3V'.'ic3Ry'),base64_decode('c3'.'R'.'ybGVu'),base64_decode('c'.'3RybGVu'),base64_decode('Y2hy'),base64_decode(''.'b'.'3'.'Jk'),base64_decode('b3Jk'),base64_decode('bWt0a'.'W'.'1'.'l'),base64_decode('aW5'.'0dmFs'),base64_decode('aW50'.'dmF'.'s'),base64_decode(''.'aW50dmFs'),base64_decode(''.'a3'.'N'.'vcnQ='),base64_decode('c3Vi'.'c3Ry'),base64_decode('a'.'W1wb'.'G9kZ'.'Q=='),base64_decode('ZGVmaW5lZA=='),base64_decode('YmFzZT'.'Y0X'.'2RlY29kZQ=='),base64_decode('Y29uc3R'.'hbnQ='),base64_decode(''.'c3RycmV2'),base64_decode(''.'c3B'.'ya'.'W'.'50'.'Zg=='),base64_decode('c3RybGVu'),base64_decode('c3Ry'.'bG'.'Vu'),base64_decode('Y'.'2hy'),base64_decode('b3Jk'),base64_decode(''.'b3Jk'),base64_decode('bWt0'.'aW1l'),base64_decode('a'.'W5'.'0dmFs'),base64_decode('a'.'W50d'.'mFs'),base64_decode('aW5'.'0'.'dm'.'Fs'),base64_decode('c3Vic3Ry'),base64_decode('c3V'.'ic3'.'R'.'y'),base64_decode('dGlt'.'ZQ=='),base64_decode('b'.'W'.'t0aW1'.'l'),base64_decode('bWt0'.'a'.'W1l'),base64_decode('ZGF0ZQ=='),base64_decode(''.'ZGF0'.'ZQ=='),base64_decode('ZGVma'.'W'.'5'.'l'),base64_decode('ZG'.'VmaW5l'),base64_decode('cm'.'91bm'.'Q='),base64_decode('dHJpb'.'Q=='),base64_decode('dHJ'.'p'.'bQ=='),base64_decode(''.'cm'.'91bmQ'.'='),base64_decode('dHJpbQ=='),base64_decode('d'.'HJ'.'pb'.'Q=='),base64_decode('c3Vic3Ry'),base64_decode(''.'bWJfY2'.'9udmVydF9lbm'.'NvZG'.'luZw=='),base64_decode('cm91bmQ='),base64_decode(''.'cm91bmQ'.'='),base64_decode('cm91'.'bmQ='),base64_decode(''.'c3Vic3R'.'y'),base64_decode('bWJfY29u'.'dmVydF'.'9lb'.'mNvZ'.'G'.'l'.'uZ'.'w'.'=='),base64_decode(''.'cm'.'91'.'bmQ='),base64_decode('c'.'m91bmQ'.'='),base64_decode('cmV'.'zZXQ='),base64_decode('aW50dm'.'Fs'),base64_decode('c3R'.'y'.'bG'.'Vu'),base64_decode('a'.'3NvcnQ'.'='),base64_decode(''.'aW'.'1wb'.'G9kZQ=='),base64_decode('YXJyYXlfdmF'.'s'.'dWVz'),base64_decode('aGFza'.'A=='),base64_decode('ZGVmaW5'.'lZA'.'=='),base64_decode('c3RybG'.'V'.'u'));if(!function_exists(__NAMESPACE__.'\\___385691105')){function ___385691105($_1813418007){static $_2124549413= false; if($_2124549413 == false) $_2124549413=array('ZXh'.'wa'.'XJl'.'X21l'.'c3N'.'fY3VzdG'.'9'.'tMg'.'='.'=',''.'cm92'.'ZXJfdG'.'lua29mZl8'.'=','b'.'21lZA==',''.'WQ==','ZHJt'.'X3N0Z'.'X'.'Jnb2tj','JTAxMHMK','ZX'.'J'.'fdGlu','c'.'m92'.'ZXIu'.'dG'.'lua2'.'9mZg==','JXMlcw==','fmJz','Z'.'XRhZF9wbw'.'='.'=','YWRtaW4=','bW9kd'.'Wxlcw==',''.'dXN'.'lcl9'.'kYX'.'Rl'.'X2Jz'.'b'.'S5waHA'.'=','cm9'.'2Z'.'XIudGlua29m'.'Zg='.'=',''.'Ym'.'l0cml4','Ukhlcl90aW4=','NWE'.'1YjUyYT'.'Bk'.'NDhoeXRv'.'cw==','','NGVi','N2U'.'zNzI0Y'.'Tg5OTI5Y'.'zE'.'4'.'NjM'.'x','NDI1MWMzNg'.'==',''.'aHR'.'0cDovL2JpdH'.'JpeHN'.'vZnQuY'.'29tL2J'.'pdHJpe'.'C9icy5waH'.'A=','cm92','a29m'.'Zl9PT'.'E'.'RTSVR'.'FRVhQSV'.'JFR'.'EFURVM=','RE9DVU1FTl'.'R'.'fUk'.'9PVA==','Lw==','L'.'w'.'==','cm92ZXJfdG'.'l'.'u'.'a29'.'m'.'Zl'.'9'.'URU1QT1JBUllfQ0'.'F'.'DSEU=','cm92ZXJf'.'dGlua29'.'mZl9U'.'RU1Q'.'T1JBU'.'llfQ0F'.'DS'.'EU'.'=','','NWM'.'4OGE=','J'.'XMlcw'.'==','MDZlMDA4ZjdkYzY4Yj'.'RiZDY5'.'NTg'.'=','c'.'m92','a29mZl9TSVR'.'FRVhQSVJFREF'.'URU'.'1BUEVS','bQ==','ZA==','WQ==','U2l'.'0'.'ZUV4cGlyZURhdGVfcm92ZXJfd'.'Glua29mZ'.'g==','c2FsZQ==',''.'c2'.'FsZSBtb'.'2R'.'1bGUgbm90IGZvdW5k','Rk9ST'.'V9Q'.'QV'.'JB'.'TVM'.'=','UkVBRFlfVE9fUE'.'FZ','T'.'3JkZ'.'XJJZD0=','T1J'.'ERVJfSUQ=','IG'.'dvb2Qgc'.'GF5bW'.'Vu'.'dA='.'=','Uk'.'VBRFlf'.'V'.'E9fUE'.'FZ','TUV'.'TU0FHRQ==',''.'T3JkZXJ'.'JZ'.'D0'.'=',''.'T1JERVJfS'.'UQ=','IA'.'==','VG9rZW'.'4=','U0hPUF9TRUN'.'SRV'.'R'.'f'.'V09SRA'.'==','VG9r'.'ZW'.'4=','U0hPUF'.'9TRUNSRVRfV09'.'S'.'RA==','Q0F'.'OX1BSS'.'U5'.'UX0'.'NIRU'.'NL','WQ'.'='.'=','VEFYQVRJT04=','TkRT','UmVj'.'ZWlwdA='.'=','SW5'.'pdCBn'.'ZXRSZWNlaXB0'.'OiA=','SXRlbXM=',''.'VG'.'F4YXRpb2'.'4=','VEFYQVRJT0'.'4'.'=',''.'U'.'k'.'VD'.'SVB'.'JRU'.'5UX0l'.'E','ZW1h'.'aWw=','RW1'.'haW'.'w'.'=','UkV'.'D'.'S'.'VBJRU5UX0lE','cGhvb'.'mU=','U'.'GhvbmU'.'=','U'.'FJ'.'JQ0'.'U'.'=','SXRlbXM'.'=','TmFtZQ==','Tk'.'FNR'.'Q='.'=','VVRG'.'LTg=','UHJpY'.'2'.'U=',''.'UFJJ'.'Q0U=','UXVhbnRp'.'dHk=',''.'UVVBTlRJVFk=','QW'.'1vd'.'W50','UFJJQ'.'0U=','UV'.'VBTlRJVFk=','VGF'.'4',''.'TkRT',''.'ZG'.'Vs'.'a'.'XZlcnkgc3'.'l'.'zdGVtIG5vd'.'CB'.'mb3V'.'uZA==','SXRlb'.'XM=',''.'TmF'.'tZ'.'Q==','TkF'.'NRQ'.'==','VVR'.'GLT'.'g=','UHJpY2'.'U=',''.'U'.'XVhbnRpdH'.'k=',''.'QW1vdW50','V'.'GF4','TkRT','YWZ0'.'Z'.'XJC'.'dWlsZFJ'.'lY'.'2V'.'pcHQ=','Zmlsd'.'GVy','PU'.'NPRE'.'U=','UEFSRU5UX'.'0'.'l'.'E','UEFSRU5U'.'X0lE',''.'c2V'.'s'.'ZWN0','T'.'kF'.'NRQ==','TkFNRQ'.'==','TkFNR'.'Q='.'=','IC'.'g=','TkFNRQ==','KQ==','RE'.'F'.'UQ'.'Q='.'=','UmV'.'jZW'.'l'.'w'.'dA==','UGFzc3d'.'v'.'cmQ=','','c2hh'.'MjU2','c'.'m92ZXJf'.'dGlua29'.'mZl9PTER'.'T'.'SVRFRVhQSVJ'.'FREFURQ'.'='.'=','ZXhwaXJl'.'X21lc3NfY3Vzd'.'G9tMg'.'==');return base64_decode($_2124549413[$_1813418007]);}};$_1529807293= GetMessage(___385691105(0));$_1057750384=(918-2*459);@$GLOBALS['____1821209743'][0](___385691105(1).$GLOBALS['____1821209743'][1]($GLOBALS['____1821209743'][2](___385691105(2))), ___385691105(3));$_1809167574= round(0+0.25+0.25+0.25+0.25); $_177749031= ___385691105(4); unset($_241271329); $_63685394= $GLOBALS['____1821209743'][3](___385691105(5), ___385691105(6)); $_241271329= \COption::GetOptionString(___385691105(7), $GLOBALS['____1821209743'][4](___385691105(8),___385691105(9),$GLOBALS['____1821209743'][5]($_177749031, round(0+2), round(0+4))).$GLOBALS['____1821209743'][6](___385691105(10))); $_262002754= array(round(0+8.5+8.5) => ___385691105(11), round(0+7) => ___385691105(12), round(0+4.4+4.4+4.4+4.4+4.4) => ___385691105(13), round(0+6+6) => ___385691105(14), round(0+0.75+0.75+0.75+0.75) => ___385691105(15)); $_904488401= ___385691105(16); while($_241271329){ $_682636212= ___385691105(17); $_630327189= $GLOBALS['____1821209743'][7]($_241271329); $_521959897= ___385691105(18); $_682636212= $GLOBALS['____1821209743'][8](___385691105(19).$_682636212,(868-2*434),-round(0+5)).___385691105(20); $_332669417= $GLOBALS['____1821209743'][9]($_682636212); $_918669292=(1160/2-580); for($_976050326=(157*2-314); $_976050326<$GLOBALS['____1821209743'][10]($_630327189); $_976050326++){ $_521959897 .= $GLOBALS['____1821209743'][11]($GLOBALS['____1821209743'][12]($_630327189[$_976050326])^ $GLOBALS['____1821209743'][13]($_682636212[$_918669292])); if($_918669292==$_332669417-round(0+0.33333333333333+0.33333333333333+0.33333333333333)) $_918669292=(1396/2-698); else $_918669292= $_918669292+ round(0+0.33333333333333+0.33333333333333+0.33333333333333);} $_1809167574= $GLOBALS['____1821209743'][14]((188*2-376),(1008/2-504),(972-2*486), $GLOBALS['____1821209743'][15]($_521959897[round(0+6)].$_521959897[round(0+3)]), $GLOBALS['____1821209743'][16]($_521959897[round(0+0.2+0.2+0.2+0.2+0.2)].$_521959897[round(0+4.6666666666667+4.6666666666667+4.6666666666667)]), $GLOBALS['____1821209743'][17]($_521959897[round(0+5+5)].$_521959897[round(0+6+6+6)].$_521959897[round(0+2.3333333333333+2.3333333333333+2.3333333333333)].$_521959897[round(0+4+4+4)])); unset($_682636212); break;} $_258839034= ___385691105(21); $GLOBALS['____1821209743'][18]($_262002754); $_1167195942= ___385691105(22); $_904488401= ___385691105(23).$GLOBALS['____1821209743'][19]($_904488401.___385691105(24), round(0+0.66666666666667+0.66666666666667+0.66666666666667),-round(0+1));@include($_SERVER[___385691105(25)].___385691105(26).$GLOBALS['____1821209743'][20](___385691105(27), $_262002754)); $_643134830= round(0+2); while($GLOBALS['____1821209743'][21](___385691105(28))){ $_1269112082= $GLOBALS['____1821209743'][22]($GLOBALS['____1821209743'][23](___385691105(29))); $_59412645= ___385691105(30); $_258839034= $GLOBALS['____1821209743'][24](___385691105(31)).$GLOBALS['____1821209743'][25](___385691105(32),$_258839034,___385691105(33)); $_140384137= $GLOBALS['____1821209743'][26]($_258839034); $_918669292=(1000-2*500); for($_976050326=(756-2*378); $_976050326<$GLOBALS['____1821209743'][27]($_1269112082); $_976050326++){ $_59412645 .= $GLOBALS['____1821209743'][28]($GLOBALS['____1821209743'][29]($_1269112082[$_976050326])^ $GLOBALS['____1821209743'][30]($_258839034[$_918669292])); if($_918669292==$_140384137-round(0+0.5+0.5)) $_918669292=(216*2-432); else $_918669292= $_918669292+ round(0+0.33333333333333+0.33333333333333+0.33333333333333);} $_643134830= $GLOBALS['____1821209743'][31]((966-2*483),(800-2*400),(828-2*414), $GLOBALS['____1821209743'][32]($_59412645[round(0+1.5+1.5+1.5+1.5)].$_59412645[round(0+8+8)]), $GLOBALS['____1821209743'][33]($_59412645[round(0+2.25+2.25+2.25+2.25)].$_59412645[round(0+0.4+0.4+0.4+0.4+0.4)]), $GLOBALS['____1821209743'][34]($_59412645[round(0+2.4+2.4+2.4+2.4+2.4)].$_59412645[round(0+7)].$_59412645[round(0+2.8+2.8+2.8+2.8+2.8)].$_59412645[round(0+1+1+1)])); unset($_258839034); break;} $_63685394= ___385691105(34).$GLOBALS['____1821209743'][35]($GLOBALS['____1821209743'][36]($_63685394, round(0+0.6+0.6+0.6+0.6+0.6),-round(0+0.33333333333333+0.33333333333333+0.33333333333333)).___385691105(35), round(0+0.2+0.2+0.2+0.2+0.2),-round(0+1.25+1.25+1.25+1.25));for($_976050326=(950-2*475),$_1151349158=($GLOBALS['____1821209743'][37]()< $GLOBALS['____1821209743'][38]((1332/2-666),(177*2-354),min(140,0,46.666666666667),round(0+1.25+1.25+1.25+1.25),round(0+0.2+0.2+0.2+0.2+0.2),round(0+402+402+402+402+402)) || $_1809167574 <= round(0+2+2+2+2+2)),$_170074498=($_1809167574< $GLOBALS['____1821209743'][39]((127*2-254),(185*2-370),min(158,0,52.666666666667),Date(___385691105(36)),$GLOBALS['____1821209743'][40](___385691105(37))-$_1057750384,$GLOBALS['____1821209743'][41](___385691105(38)))); $_976050326< round(0+3.3333333333333+3.3333333333333+3.3333333333333),$_1151349158 || $_170074498 || $_1809167574 != $_643134830; $_976050326++)return false;$GLOBALS['____1821209743'][42]($_904488401, $_1809167574); $GLOBALS['____1821209743'][43]($_63685394, $_643134830); $GLOBALS[___385691105(39)]= rover_tinkoff_OLDSITEEXPIREDATE; use Bitrix\Sale\Payment; use Sale\Handlers\PaySystem\rover_tinkoffHandler; use Bitrix\Main\Loader; use Rover\Tinkoff\Log; use \Bitrix\Sale\Order; use \Rover\Tinkoff\OrderProps; use \Bitrix\Sale\Delivery\Services\Table as DeliveryServices; if(!Loader::includeModule(___385691105(40))) throw new \Bitrix\Main\SystemException(___385691105(41)); class RoverTinkoffHelper{ public static function getExtraParams(rover_tinkoffHandler $_739637315, $_582844192, Payment $_2127638356){ Log::note('OrderId='. $_582844192['ORDER_ID']. '; Price='. $GLOBALS['____1821209743'][44]($_582844192['SHOULD_PAY']* 100)); try{ $_185044982[___385691105(42)]= $_739637315->initPayment($_2127638356); $_185044982[___385691105(43)]= true; Log::note(___385691105(44).$_582844192[___385691105(45)].___385691105(46));} catch(\Exception $_1246893824){ $_185044982[___385691105(47)]= false; $_185044982[___385691105(48)]= $_1246893824->getMessage(); Log::error(___385691105(49).$_582844192[___385691105(50)].___385691105(51). $_1246893824);} return $_185044982;} public static function getRefundParams($_582844192, $_275498449){ $_469988118= array( 'TerminalKey' => $_582844192['TERMINAL_ID'], 'PaymentId' => $_275498449['PAY_VOUCHER_NUM'],  ); $_469988118[___385691105(52)]= self::__661357997($_469988118, $GLOBALS['____1821209743'][45]($_582844192[___385691105(53)])); return $_469988118;} public static function getInitParams(Payment $_2127638356, array $_582844192){ $_469988118= array( 'TerminalKey' => $GLOBALS['____1821209743'][46]($_582844192['TERMINAL_ID']), 'Amount' => $GLOBALS['____1821209743'][47]($_582844192['SHOULD_PAY']* 100), 'OrderId' => $GLOBALS['____1821209743'][48]($_582844192['ORDER_ID']), ); $_469988118[___385691105(54)]= self::__661357997($_469988118, $GLOBALS['____1821209743'][49]($_582844192[___385691105(55)])); $_1149267613= $_2127638356->getPaySystem(); if(($_1149267613->getField(___385691105(56)) == ___385691105(57)) &&(!empty($_582844192[___385691105(58)])) &&(!empty($_582844192[___385691105(59)]))) try{ $_469988118[___385691105(60)]= self::__1644285582($_582844192);} catch(\Exception $_1246893824){ Log::error(___385691105(61). $_1246893824->getMessage());} return $_469988118;} private static function __1644285582($_582844192){ $_424863661= Order::loadByAccountNumber($_582844192['ORDER_ID']); if(!$_424863661) return[]; $_1026550323= $_424863661->getPropertyCollection(); $_85918530= array( ___385691105(62) => array(),   ___385691105(63) => $_582844192[___385691105(64)],); if(($_582844192[___385691105(65)] != ___385691105(66)) &&($_1026550323->getUserEmail())) $_85918530[___385691105(67)]= $_1026550323->getUserEmail()->getValue(); if(($_582844192[___385691105(68)] != ___385691105(69)) &&($_1026550323->getPhone())) $_85918530[___385691105(70)]= $_1026550323->getPhone()->getValue(); $_1958815742= $_424863661->getBasket()->getBasketItems(); foreach($_1958815742 as $_1250627000){ $_1575558518= $_1250627000->getFieldValues(); if($_1575558518[___385691105(71)] <=(910-2*455)) continue; $_85918530[___385691105(72)][]= array( ___385691105(73) => $GLOBALS['____1821209743'][50]($GLOBALS['____1821209743'][51]($_1575558518[___385691105(74)], ___385691105(75), LANG_CHARSET),(126*2-252), round(0+32+32)), ___385691105(76) => $GLOBALS['____1821209743'][52]($_1575558518[___385691105(77)]* round(0+50+50)), ___385691105(78) => $GLOBALS['____1821209743'][53]($_1575558518[___385691105(79)], round(0+1.5+1.5), PHP_ROUND_HALF_UP), ___385691105(80) => $GLOBALS['____1821209743'][54]($_1575558518[___385691105(81)]* $_1575558518[___385691105(82)]* round(0+50+50)), ___385691105(83) => $_582844192[___385691105(84)]);} $_2025751811= $_424863661->getDeliveryPrice(); if($_2025751811){ $_1926417395= self::__1550519900($_424863661); if(!$_1926417395) throw new \Bitrix\Main\SystemException(___385691105(85)); $_85918530[___385691105(86)][]= array( ___385691105(87) => $GLOBALS['____1821209743'][55]($GLOBALS['____1821209743'][56]($_1926417395[___385691105(88)], ___385691105(89), LANG_CHARSET),(1028/2-514), round(0+21.333333333333+21.333333333333+21.333333333333)), ___385691105(90) => $GLOBALS['____1821209743'][57]($_2025751811* round(0+100)), ___385691105(91) => round(0+0.2+0.2+0.2+0.2+0.2), ___385691105(92) => $GLOBALS['____1821209743'][58]($_2025751811* round(0+100)), ___385691105(93) => $_582844192[___385691105(94)],);}   $_487024601= \Rover\Tinkoff\Event::run(___385691105(95), $_424863661, $_85918530, $_582844192); if(isset($_487024601[round(0+1)])) return $_487024601[round(0+0.25+0.25+0.25+0.25)]; return[];} private static function __1550519900(Order $_424863661){ $_1883067680= $GLOBALS['____1821209743'][59]($_424863661->getDeliverySystemId()); $_133339606= null; if($GLOBALS['____1821209743'][60]($_1883067680)) $_133339606= DeliveryServices::getRowById($_1883067680); elseif($GLOBALS['____1821209743'][61]($_1883067680)){ $_133339606= DeliveryServices::getRow(array(___385691105(96) => array(___385691105(97) => $_1883067680)));} if(isset($_133339606[___385691105(98)])){ $_1365182995= DeliveryServices::getByPrimary($_133339606[___385691105(99)], array( ___385691105(100) => array(___385691105(101))))->fetch(); $_133339606[___385691105(102)]= $_1365182995[___385691105(103)]. ___385691105(104). $_133339606[___385691105(105)]. ___385691105(106);} return $_133339606;} private static function __661357997(array $_582844192, $_833821592){ $_1098211222= $_582844192; unset($_1098211222[___385691105(107)]); unset($_1098211222[___385691105(108)]); $_1098211222[___385691105(109)]= $_833821592; $GLOBALS['____1821209743'][62]($_1098211222); $_1292546250= $GLOBALS['____1821209743'][63](___385691105(110), $GLOBALS['____1821209743'][64]($_1098211222)); return $GLOBALS['____1821209743'][65](___385691105(111), $_1292546250);}};while(!$GLOBALS['____1821209743'][66](___385691105(112)) || $GLOBALS['____1821209743'][67](rover_tinkoff_OLDSITEEXPIREDATE) <=(1116/2-558) || rover_tinkoff_OLDSITEEXPIREDATE != rover_tinkoff_SITEEXPIREDATE)die(GetMessage(___385691105(113)));?>